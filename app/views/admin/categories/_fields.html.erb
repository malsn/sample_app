<%= render 'shared/error_messages', object: f.object %>

<%= f.label :title %>
<%= f.text_field :title %>

<%= f.label :text %>
<%= f.text_area :text, size: "60x12" %>

<% if current_user.admin? %>
<%= f.label :user_id %>
<%= f.select :user_id, options_for_select( User.all.map { |user| [user.name, user.id] } , current_user.id) %>
<% end %>

<%= f.label :parent_id %>
<% @allcategories = Category.all %>
<% if !@category.parent.nil? %>
	<%= 
	@current_cat = @category
	@collection = [@current_cat]
	collect(@current_cat)
	@cutcategories = @allcategories - @collection
	f.select :parent_id, options_for_select(@cutcategories.map { |cat| [cat.title, cat.id] } , @category.parent.id)
	%>
<% else %>
	<%= f.select :parent_id, options_for_select(@allcategories.map { |cat| [cat.title, cat.id] }) %>
<% end %>